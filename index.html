
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>ç™¼ä¸€å´‡å¾·å°ä¸­é“å ´è³‡è¨Šç¶²</title>
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,minimal-ui">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="description" content="æœ¬ç³»çµ±å·²å°å…¥ PWAï¼Œå¯å®‰è£è‡³æ¡Œé¢ä½¿ç”¨ã€‚">
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#e0f7fa" />
  <link rel="icon" href="icons/icon-192.png" />
  <style>
    body {
      font-family: sans-serif; text-align: center; margin: 0; padding: 2em;
      background: #f0f4f8; display: flex; flex-direction: column;
      justify-content: center; align-items: center; min-height: 100vh; box-sizing: border-box;
    }
    #message { font-size: 1.2em; color: #333; margin-bottom: 1em; }
    .spinner {
      width: 48px; height: 48px; margin: 2em auto; border: 6px solid #ccc;
      border-top: 6px solid #3f51b5; border-radius: 50%; animation: spin 1s linear infinite;
    }
    @keyframes spin { to { transform: rotate(360deg); } }
    .action-button {
      background: #3f51b5; color: #fff; padding: 10px 20px; border: none;
      border-radius: 5px; font-size: 1em; cursor: pointer; margin-top: 1em;
    }
    .action-button:hover { background: #303f9f; }
  </style>
  <script>
const SITE_URL = "https://sites.google.com/view/fycd-tc/";

function detectClient () {
  const ua = navigator.userAgent;
  const isIOS      = /iPhone|iPad|iPod/i.test(ua) || (ua.includes('Mac') && 'ontouchend' in document);
  const isAndroid  = /Android/i.test(ua);
  const isChrome   = /Chrome/.test(ua) && !/Edg/.test(ua);
  const isEdge     = /Edg/.test(ua);
  const isSafari   = /Safari/.test(ua) && !isChrome && !isEdge;
  return {
    isIOS, isAndroid, isChrome, isEdge, isSafari,
    inPWA: window.matchMedia('(display-mode: standalone)').matches ||
           window.matchMedia('(display-mode: fullscreen)').matches ||
           navigator.standalone === true
  };
}

window.addEventListener('load', () => {
  const c       = detectClient();
  const msg     = document.getElementById('message');
  const spinner = document.querySelector('.spinner');
  const body    = document.body;

  /* â”€â”€â”€â”€â”€ â‘  å·²å®‰è£ PWA â”€â”€â”€â”€â”€ */
  if (c.inPWA) {
    msg.textContent = 'App æ­£åœ¨å•Ÿå‹•â€¦';
    window.location.href = SITE_URL;
    return;                         // å¾ŒçºŒç¨‹å¼ä¸å†åŸ·è¡Œ
  }

  /* â”€â”€â”€â”€â”€ â‘¡ æœªå®‰è£ (!PWA) â”€â”€â”€â”€â”€ */
  let hint = 'ğŸ“² å»ºè­°å®‰è£è‡³æ¡Œé¢ï¼Œäº«å—å…¨è¢å¹•é«”é©—ã€‚';
  if (c.isIOS && c.isSafari) {
    hint = 'ğŸ“² åœ¨ Safari åº•éƒ¨ã€Œåˆ†äº«ã€â†’ã€åŠ å…¥ä¸»ç•«é¢ã€å®‰è£ã€‚';
  } else if (c.isAndroid && (c.isChrome || c.isEdge)) {
    hint = 'ğŸ“² é»ç¶²å€åˆ—å³å´ã€Œå®‰è£åœ–ç¤ºã€æˆ–é¸å–®ã€ŒåŠ å…¥ä¸»ç•«é¢ã€ã€‚';
  }

  msg.innerHTML = `
    ğŸ‘‹ æ­¡è¿ä½¿ç”¨<br><br>${hint}<br>
    å°‡åœ¨<strong>20 ç§’</strong>å¾Œè‡ªå‹•è·³è½‰ç¶²ç«™ï¼Œ<br>
    æˆ–é»æ“Šä¸‹æ–¹æŒ‰éˆ•ç«‹å³å‰å¾€ã€‚
  `;
  spinner.style.display = 'none';

  /* ç«‹å³å‰å¾€æŒ‰éˆ• */
  const btn = document.createElement('button');
  btn.className = 'action-button';
  btn.textContent = 'ç«‹å³å‰å¾€ç¶²ç«™';
  btn.onclick = () => window.location.href = SITE_URL;
  body.appendChild(btn);

  /* 20 ç§’å¾Œè‡ªå‹•è·³è½‰ï¼ˆé é¢ä»åœ¨å‰æ™¯æ™‚ï¼‰ */
  setTimeout(() => {
    if (!document.hidden) window.location.href = SITE_URL;
  }, 20000);
});

/* è¨»å†Š Service Worker */
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('service-worker.js');
}
</script>
</body>
</html>